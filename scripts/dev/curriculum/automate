#!/usr/bin/env ./node_modules/.bin/tsx
import "dotenv/config";
import yargs from 'yargs/yargs';
import { hideBin } from 'yargs/helpers';
import compare from './_commands/compare';
import {buildChicken} from "./_commands/chicken"


yargs(hideBin(process.argv))
  .command('compare <basepath> <targetpath>', 'compare two sets of screenshots', (yargs) => {
    return yargs
      .positional('basepath', {
        describe: 'basepath directory',
      })
      .positional('targetpath', {
        describe: 'targetpath directory',
      })
  }, async (argv) => {
    await compare(argv.basepath, argv.targetpath);
  })
  .command('chicken [message]', false, (yargs) => {
    return yargs
      .positional("message", {
        describe: "the message to say",
        default: "Welcome\\nfriends",
        hidden: true,
      })
  }, async (argv) => {
    console.log(buildChicken(argv.message, argv.message))
  })
  .demand(1)
  .argv
